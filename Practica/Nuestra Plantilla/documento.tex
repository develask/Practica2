\documentclass[a4paper,10pt]{article}
\usepackage[margin=0.5in]{geometry}
\usepackage{amsthm}
%\usepackage{mathtools}
\usepackage{amssymb}
\usepackage{array}
\usepackage[round]{natbib}
\usepackage{array}
\theoremstyle{plain}
\usepackage{color}
\newtheorem{theo}{Theorem}
\newtheorem{defn}{Definition}

% Redefinimos la funcion \today para ponerla en castellano
\def\today{\number\day~de\space\ifcase\month\or 
  enero\or febrero\or marzo\or abril\or mayo\or junio\or 
  julio\or agosto\or septiembre\or octubre\or noviembre\or diciembre\fi 
  \space de~\number\year}
  
\begin{document}
\author{Mikel de Velasco}
\pagenumbering{roman}
\title{Pr\'actica 2}

\author{Mikel de Velasco, Ieltzu Irazu, Mï¿½ In\'es Fernandez}
\date{\today}
\maketitle

%\begin{abstract}
%In this manuscript, we study the Boltzmann distribution associated to the linear ordering problem. Particularly, we demonstrate that this distribution is L-decomposable. Moreover, we investigate towards an efficient sampling method of the Boltzmann distribution.
%\end{abstract}


\section{Introducci\'on}

Se pide diseÃ±ar un clasificador que implemente el m\'etodo k-NN b\'asico con la distancia de
Minkowski seg\'un la expresi\'on (\ref{minkowski}) donde {\color[rgb]{1,.5,0} n} representa el n\'umero de atributos empleados para caracterizar las muestras.

\begin{equation}\label{minkowski}
d(a,b)=\left[\sum_{i=1}^{{\color[rgb]{1,.5,0} n}}|a_{i}-b_{i}|^{\color{magenta} m}\right]^{\frac{1}{\color{magenta} m}}
\end{equation}

El clasificador permitir\'a seleccionar tanto el n\'umero de vecinos a explorar ({\color{blue} k}) como el par\'ametro {\color{magenta} m} de la expresi\'on (\ref{minkowski}). Elegir el lenguaje de programaci\'on que se considere m\'as apropiado para el diseÃ±o.
Para inferir el clasificador se dispone de un conjunto de datos (Diabetes.arff). El conjunto de datos dispone de 768 instancias para inferir el modelo. Para describir las instancias se utilizan 8 atributos m\'as la clase. Los atributos son los siguientes:

\begin{itemize}
\item Number of times pregnant
\item Plasma glucose concentration a 2 hours in an oral glucose tolerance test
\item Diastolic blood pressure 
\item Triceps skin fold thickness 
\item 2-Hour serum insulin 
\item Body mass index 
\item Diabetes pedigree function
\item Age 
\item Class variable 
\end{itemize}

La clase que hay que determinar es si el paciente tiene diabetes o no.

\subsection{Par\'ametro {\color{blue}k}}

El par\'ametro {\color{blue}k} es el par\'ametro que utilizaremos para indicar cuantos vecinos vamos a usar para evaluar el clasificador. Cuantos m\'as usemos mejor, pero, tambi\'en aumentara el costo del algoritmo.

\subsection{Par\'ametro {\color{magenta}m}}

El par\'ametro {\color{magenta}m} sera el par\'ametro que utilizaremos para saber que distancia tenemos que utilizar para evaluar nuestro clasificador.

En esta pr\'actica hemos implementado 3 distintas distancias:

\begin{enumerate}
    \item Distancia de \textbf{Manhattan}:
    	
	La distanciade Manhattan (\ref{manhattan}), entre dos vectores ${\mathbf{x}}$, ${\mathbf{y}}$ en un espacio vectorial real n-dimensional con un sistema de Coordenadas cartesianas fijo es la suma de las longitudes de las proyecciones del segmento de línea entre los puntos sobre el sistema de ejes coordenados.

	\begin{equation}\label{manhattan}
	d(\mathbf{x},\mathbf{y})=\sum_{i=1}^{n}|x_{i}-y_{i}|
	\end{equation}
	
	Donde ${n}$ es el n\'umero de dimensiones.
    
    \item Distancia \textbf{Eucl\'idea}: 
    
    Un espacio eucl\'ideo es un espacio vectorial formado sobre los números reales de dimensión finita, en que la norma es la asociada al producto escalar ordinario. Para cada número entero no negativo n, el espacio eucl\'ideo n-dimensional se representa por el símbolo ${\mathbb{R}^{n}}$ y es el conjunto de todas las tuplas ordenadas ${(x_1,x_2,\ldots,x_n)}$ en donde cada ${x_i}$ es un n\'umero real, junto con la función distancia entre dos puntos ${(x1, \ldots, x_n) e (y1, \ldots, y_n)}$ definida por la fórmula:
    
    \begin{equation}\label{euclidea}
    d(\mathbf{x}, \mathbf{y}) = \|\mathbf{x} - \mathbf{y}\| = \sqrt{\sum_{i=1}^n (x_i - y_i)^2}
    \end{equation}
    
    Esta funci\'on distancia es una generalizaci\'on del teorema de Pit\'agoras y se denomina Distancia euclidiana (\ref{euclidea}).
    
    \item Distancia de \textbf{Minkowski}:
    
    En física matemática, el espacio de Minkowski (\ref{minkowski}) (o espacio-tiempo de Minkowski) es una variedad lorentziana de cuatro dimensiones y curvatura nula, usada para describir los fenómenos físicos en el marco de la teoría especial de la relatividad de Einstein.

En el espacio de Minkowski pueden distinguirse tres dimensiones espaciales ordinarias y una dimensión temporal adicional, de tal manera que todas juntas forman una 4-variedad y así representar al espacio-tiempo.

 El espacio-tiempo de Minkowski es una variedad lorentziana de curvatura nula e isomorfa a ${\mathcal{M}_0 = (\mathbb{R}^4, \boldsymbol \eta)}$ donde el tensor métrico puede llegar a escribirse en un sistema de coordenadas cartesianas como:
	\begin{equation}\label{minkowski}
	\eta = -dx^0\otimes dx^0 + dx^1\otimes dx^1 + dx^2\otimes dx^2 + dx^3\otimes dx^3
	\end{equation}
\end{enumerate}
	
    
\section{Metodolog\'ia}

En este apartado desarrollaremos nuestro propio algoritmo K-Nearest Neighbors y describiremos el dise\~no y c\'omo hemos implementado este algoritmo. Adem\'as haremos una breve descripci\'on de como hacer funcionar el programa.

El algoritmo que hemos desarrollado es b\'asicamente una adaptaci\'on del clasificador IBk ya que hemos cogido su c\'odigo y le hemos cambiado la forma de estimar que estaban utilizando. 

Nuestro programa puede ser ejecutado desde eclipse de una manera muy f\'acil. Si ejecutas el Probador.java conseguir\'as una ejecuci\'on total del programa y obtendr\'as los resultados en la carpeta de ficheros. 

	Como par\'ametros de entrada tendremos el siguiente: ruta del archivo que queramos analizar, en nuestro caso, ficheros/diabetes.arff
	
Dentro de la ejecuci\'on total tenemos varias partes de ejecuciones. La primera nos vale para quitar atributos y instancias que no nos van a servir para la evaluaci\'on de nuestro m\'etodo. Despu\'es haremos la inferencia y la evaluaci\'on del clasificador Ibk. 
Una vez que tengamos los datos del primer clasificador, haremos la evaluaci\'on de nuestroModelo.

Los resultados quedaran dentro de la carpeta ficheros. Si se quiere comparar los clasificadores solamente tendremos que fijarnos en los datos que hemos sacado en las evaluaciones.

Adem\'as tenemos otros m\'etodos que ya hemos mencionado pero no les hemos dado importancia. Tenemos varias clases que utilizamos para la lectura y escritura de todo tipo de archivos, aunque en este caso solamente necesitemos lectura y escritura de archivos de texto.

\section{Resultados}

En esta secci\'on mostraremos los resultados que hemos obtenido de las ejecuciones anteriores.

Resultados del clasificador Ibk:
\begin{verbatim}

******************************************************

****Hold Out 70 30****

******************************************************
F-Measure Batazbestekoa: 0.7560923349427191
K Maximoa: 25
Distance Weighting: 1
Revision: 10141
Training Times: 212
Nearest Neighbour Searh Algorithm: weka.core.neighboursearch.BallTree@4d591d15
K Maximoa metodo ez exhaustiboarekin: 15
Precision Batazbestekoa: 0.7621770668504911
Recall Batazbestekoa: 0.7652582159624414
ROC Area Batazbestekoa: 0.8079297245963913
F-Measure V1: 0.8275862068965517
F-Measure V2: 0.6323529411764706
Recall V1: 0.8888888888888888
Recall V2: 0.5512820512820513
Precision V1: 0.7741935483870968
Precision V2: 0.7413793103448276
Correctly Classified Instances: 76.52582159624413
=== Confusion Matrix ===

   a   b   <-- classified as
 120  15 |   a = tested_negative
  35  43 |   b = tested_positive

******************************************************


Resultados del clasificador creado por nosotros:


******************************************************

****Estimacion Nuestro modelo****

******************************************************
K Maximoa: 38
Distance Weighting: NoDistance
Distance Type: Minkowski
Nearest Neighbour Searh Algorithm: 1
---------------------------------
    Precision = 38.61408684976535    
    Recall = 50.64933378353808          
    Accuracy = 0.5283013528046641      
    F-Measure = 43.82036358733511     
---------------------------------
------------Matriz De Confusiï¿½n---------------------
----------------------------------
---|---------|-------------------
---|-TP=39---|-FP=62--------
---|---------|-------------------
---|-TN=73---|-FN=38--------
---|---------|-------------------
\end{verbatim}

\section{Conclusiones}

Realizar un clasificador desde cero ha sido una tarea complicada a que nos hemos basado en el modelo del IBk, y le hemos ajustado el pseudoc\'odigo que ten\'iamos. Ha sido una tarea entretenida y muy din\'amica pero muy costosa. Como conclusi\'on tenemos que decir que no merece la pena crear un modelo propio habiendo ya el IBk.   

\section{Valoraci\'on Subjetiva}
Una vez finalizado todo el proyecto, cada uno hemos hecho una valoraci\'on de todo lo que ha supuesto el proyecto individualmente.

\textbf{Ieltzu:} Personalmente ha sido una tarea que no me ha gustado mucho. He visto inecesaria la practica y para lo \'unico que me ha servido es para darme cuenta de lo dif\'icil que es implementar un clasificador propio. 

\textbf{Mikel:} Bajo mi prespect\'iva, esta pr\'actica, ha ayudado a comprender como funciona el algoritmo k-NN con los diferentes p\'arametros pasados. Sabiendo que alcanzar la eficiencia del algoritmo ya implementado por weka es dif\'icil (ya que este ha sido testeado y comprobado por numerosos investigadores) es un buen método para aprender a utilizar herramientas que est\'an bien testeadas ademas de comprender por dentro como funcionan dichas herramientas intentando implementarlas nosotros.

\textbf{Maria:}



\bibliographystyle{plainnat}
\bibliography{./bibliography.bib}
https://es.wikipedia.org/wiki/Espacio-tiempo_de_Minkowski
\end{document}

